(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a983c57c"],{"02b0":function(e,t,i){},"0955":function(e,t,i){"use strict";i("4697")},1193:function(e,t,i){},"25d0":function(e,t,i){"use strict";i("1193")},"2e2c":function(e,t,i){"use strict";i("2fcc")},"2fcc":function(e,t,i){},4697:function(e,t,i){},9028:function(e,t,i){"use strict";i("02b0")},"9b3f":function(e,t,i){},a9ff:function(e,t,i){"use strict";i("9b3f")},b35e:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-tooltip",{attrs:{bottom:"",disabled:e.noTooltip},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({staticClass:"el-button-icon",attrs:{tag:"button",tabindex:"1",icon:"",small:"",disabled:e.isDisabled},on:{click:function(t){return e.$emit("click")}}},n),[i("v-icon",{attrs:{small:"",color:e.iconColor}},[e._v(e._s(e.icon))])],1)]}}])},[i("span",{staticClass:"tooltip-text tooltip-text-control"},[e._t("default")],2)])},l=[],a={name:"ElButtonIconSmall",props:{icon:{type:String,default:""},iconColor:{type:String,default:""},isDisabled:{type:Boolean,default:!1},noTooltip:{type:Boolean,default:!1}}},o=a,s=i("2877"),u=i("6544"),c=i.n(u),r=i("8336"),d=i("132d"),p=i("3a2f"),f=Object(s["a"])(o,n,l,!1,null,null,null);t["a"]=f.exports;c()(f,{VBtn:r["a"],VIcon:d["a"],VTooltip:p["a"]})},bb16:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-field",class:{"el-field_single-line":e.isSingleLine,"el-field_hide-message":e.isHideMessage}},[i("v-text-field",{staticClass:"el-field__item",attrs:{dense:"",tabindex:"1","single-line":e.isSingleLine,"hide-details":e.isHideMessage,disabled:e.isDisabled,label:e.fieldLabel},scopedSlots:e._u([{key:"append",fn:function(){return[i("el-btn-icon-small",{attrs:{tabindex:"2",icon:"mdi-dots-horizontal","no-tooltip":""},on:{click:e.eventOpenDialog}})]},proxy:!0},e.isBtnClear?{key:"append-outer",fn:function(){return[i("el-btn-icon-small",{attrs:{tabindex:"3",icon:"mdi-close","no-tooltip":""},on:{click:e.eventClearValue}})]},proxy:!0}:null],null,!0),model:{value:e.fieldValueText,callback:function(t){e.fieldValueText=t},expression:"fieldValueText"}}),i("dialog-bar-right",{attrs:{"is-dialog-name":"Список значений","is-dialog-show":e.isDialogShow,width:"586"},on:{"close-dialog":e.eventCloseDialog}},[i("el-field-in-list-dialog",{attrs:{"input-properties":e.inputProperties,"count-select-value":e.countSelectValue},on:{"accept-list":e.eventAcceptList}})],1)],1)},l=[],a=(i("4160"),i("a15b"),i("fb6a"),i("ac1f"),i("466d"),i("5319"),i("1276"),i("159b"),i("f074")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"list-dialog",attrs:{"ws-tab-cycling":"true",tabindex:"0"}},[i("div",{staticClass:"list-dialog__title"},[i("v-subheader",[e._v(e._s(e.fieldLabel))])],1),i("div",{staticClass:"list-dialog__action"},[i("el-button",{attrs:{tabindex:"1"},on:{click:e.addingItem}},[e._v("Добавить")]),i("el-button",{attrs:{tabindex:"2"},on:{click:e.acceptList}},[e._v("Применить")])],1),i("div",{staticClass:"list-dialog__body"},[i("data-table-lazy",{attrs:{headers:e.tableHeaders,items:e.tableItems,"is-clearable":!0,"input-properties":e.inputProperties},on:{"input-value":e.inputValue,"deleting-item":e.deletingItem}})],1)])},s=[],u=(i("7db0"),i("a434"),i("a9e3"),i("b64b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"data-table-lazy"},[i("div",{staticClass:"data-table-lazy__header"},[i("data-table-lazy-header",{attrs:{items:e.headers,template:e.computedTemplateTable,"is-clearable":e.isClearable}})],1),i("div",{staticClass:"data-table-lazy__body"},[i("data-table-lazy-body",{attrs:{headers:e.headers,items:e.items,template:e.computedTemplateTable,"is-clearable":e.isClearable,"input-properties":e.inputProperties},on:{"focused-row":e.focusedRow,"input-value":e.inputValue,"deleting-item":e.deletingItem}})],1),i("div",{staticClass:"data-table-lazy__footer"})])}),c=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"header-row",style:e.template},e._l(e.items,(function(t,n){return i("div",{key:"header-"+n,staticClass:"header-column",style:t.position_in_template,attrs:{"data-key":t.key}},[e._v(" "+e._s(t.text)+" ")])})),0)])},d=[],p={name:"DataTableLazyHeader",props:{items:Array,template:Object,isClearable:{type:Boolean,default:!1}}},f=p,m=(i("0955"),i("2877")),h=Object(m["a"])(f,r,d,!1,null,"793cc70a",null),b=h.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"body",on:{mouseover:e.eventMouseOver,mouseout:e.eventMouseOut}},e._l(e.items,(function(t,n){return i("div",{key:"body-row-"+n,staticClass:"body-row",style:e.template,on:{focus:function(i){return e.eventRowFocus(i,t)},blur:e.eventRowBlur,click:function(i){return e.eventRowClick(i,t)}}},e._l(e.headers,(function(l,a){return i("div",{key:"body-column-"+a,staticClass:"body-column",style:l.position_in_template,on:{focus:e.eventColumnFocus,blur:e.eventColumnBlur}},[i("div",{staticClass:"body-column__item"},[i(e.componentField,{key:t.uniqueIndex,tag:"component",attrs:{"is-single-line":!0,"is-hide-message":!0,"is-required-off":!0,"is-hide-label":!0,"is-selected":!0,"is-btn-clear":!0,"input-properties":e.inputProperties},on:{"input-value":e.eventInputValue,"keydown-enter":e.eventKeyEnter,"clear-value":function(){return e.deletingItem(n,t.uniqueIndex)}},model:{value:e.tableValue[t.uniqueIndex],callback:function(i){e.$set(e.tableValue,t.uniqueIndex,i)},expression:"tableValue[itemRow.uniqueIndex]"}})],1)])})),0)})),0)},g=[],y=(i("d3b7"),{data:function(){return{isRowFocus:!1,isColumnEditing:!1,isColumnFocus:!1}},methods:{eventMouseOver:function(e){var t;this.isColumnFocus||this.isColumnEditing||this.isRowFocus||null===(t=e.target.closest(".body-row"))||void 0===t||t.classList.add("body-row_hover")},eventMouseOut:function(e){var t,i,n;(null===(t=e.relatedTarget)||void 0===t||null===(i=t.classList)||void 0===i?void 0:i.contains("tooltip"))||this.isColumnFocus||this.isColumnEditing||this.isRowFocus||null===(n=e.target.closest(".body-row"))||void 0===n||n.classList.remove("body-row_hover")},eventRowFocus:function(e,t){this.isRowFocus=!0,e.target.classList.remove("body-row_hover"),e.target.classList.add("body-row_focus")},eventRowBlur:function(e){this.isRowFocus=!1,e.target.classList.remove("body-row_focus"),null==e.relatedTarget&&this.$emit("blur-body")},eventRowClick:function(e,t){this.$emit("focused-row",e,t)},eventColumnFocus:function(e){this.isColumnFocus=!0,e.target.parentElement.classList.remove("body-row_hover"),e.target.parentElement.classList.add("body-row_focus"),e.target.classList.add("body-column_focus")},eventColumnBlur:function(e){this.isColumnFocus=!1,e.target.parentElement.classList.remove("body-row_focus"),e.target.classList.remove("body-column_focus"),null==e.relatedTarget&&this.$emit("blur-body")}}}),_=i("6e0d"),w={name:"DataTableLazyBody",mixins:[y],components:{ElButtonIcon:_["a"]},props:{headers:Array,items:Array,template:Object,isClearable:{type:Boolean,default:!1},inputProperties:{type:Object,default:function(){return{}}}},data:function(){return{tableValue:{}}},computed:{componentField:function(){switch(this.inputProperties.type){case"choice":return function(){return i.e("chunk-facab68a").then(i.bind(null,"08a7"))};case"field":return function(){return i.e("chunk-578d7a65").then(i.bind(null,"7364"))}}}},methods:{eventInputValue:function(){this.$emit("input-value",this.tableValue)},eventKeyEnter:function(e){},deletingItem:function(e,t){this.$emit("deleting-item",e),delete this.tableValue[t],this.$emit("input-value",this.tableValue)},eventKeyBody:function(e){console.log(e),"Insert"==e.key&&this.$emit("insert-item")}}},V=w,C=(i("25d0"),Object(m["a"])(V,v,g,!1,null,"401e75a5",null)),x=C.exports,L=(i("99af"),i("498a"),{computed:{computedTemplateTable:function(){var e={"grid-template-areas":"","grid-template-columns":""},t=this.headers;return e["grid-template-areas"]=this.computedAreaUnoLine(t),e["grid-template-columns"]=this.computedWidthUnoLine(t),e}},methods:{computedAreaUnoLine:function(e){var t='"';return e.forEach((function(e){return t+="".concat(e.key," ")})),t=t.trim(),t+='"',t},computedWidthUnoLine:function(e){var t="";return e.forEach((function(e){e.width?Array.isArray(e.width)?t+="minmax(".concat(void 0!=e.width[0]?e.width[0]:"100","px, ").concat(void 0!=e.width[1]?e.width[1]+"px":"100vw",") "):t+="".concat(e.width,"px "):t+="minmax(100px, 100vw) "})),t}}}),E={methods:{focusedRow:function(e,t){this.$emit("focused-row",t)},inputValue:function(e){this.$emit("input-value",e)},deletingItem:function(e){this.$emit("deleting-item",e)}}},I={name:"DataTableLazy",components:{DataTableLazyHeader:b,DataTableLazyBody:x},mixins:[L,E],props:{headers:Array,items:Array,isClearable:{type:Boolean,default:!1},inputProperties:{type:Object,default:function(){return{}}}}},S=I,k=(i("2e2c"),Object(m["a"])(S,u,c,!1,null,"3620671e",null)),D=k.exports,T=i("1cbc"),B={name:"ElFieldListDialog",components:{DataTableLazy:D,ElButton:T["a"]},props:{countSelectValue:{type:Number,default:0},inputProperties:{type:Object,default:function(){return{}}}},data:function(){return{tableHeaders:[{key:"value",text:"Значение",position_in_template:"grid-area: value",width:[100]}],tableItems:[],uniqueIndex:0,tableValue:[]}},computed:{fieldLabel:function(){return console.log(this.inputProperties),this.inputProperties.label}},watch:{countSelectValue:function(){0==this.countSelectValue&&(console.log("del"),this.tableItems.splice(0,this.tableItems.length),this.tableValue.splice(0,this.tableValue.length))}},mounted:function(){this.addingItem()},methods:{addingItem:function(){this.uniqueIndex=this.uniqueIndex+1,this.tableItems.push({uniqueIndex:this.uniqueIndex})},deletingItem:function(e){this.tableItems.splice(e,1)},inputValue:function(e){var t=this;if(this.tableValue=[],"field"==this.inputProperties.type)for(var i=function(){var i=l[n];t.tableValue.find((function(t){return t.id==e[i].id}))||t.tableValue.push(e[i])},n=0,l=Object.keys(e);n<l.length;n++)i();else if("choice"==this.inputProperties.type)for(var a=function(){var i=s[o];t.tableValue.find((function(t){return t.value==e[i].value}))||t.tableValue.push(e[i])},o=0,s=Object.keys(e);o<s.length;o++)a()},acceptList:function(){console.log(this.tableValue),this.$emit("accept-list",this.tableValue)}}},$=B,O=(i("9028"),i("6544")),F=i.n(O),P=i("e0c7"),R=Object(m["a"])($,o,s,!1,null,"3da0193e",null),j=R.exports;F()(R,{VSubheader:P["a"]});var z=i("b35e"),q={name:"ElFieldInList",components:{ElFieldInListDialog:j,DialogBarRight:a["a"],ElBtnIconSmall:z["a"]},model:{prop:"inputValue",event:"input-value"},props:{isShow:{type:Boolean,default:!1},isSingleLine:{type:Boolean,default:!1},isHideMessage:{type:Boolean,default:!1},isHideLabel:{type:Boolean,dafault:!1},isDisabled:{type:Boolean,default:!1},isBtnClear:{type:Boolean,default:!0},inputProperties:Object,selectedItem:null},data:function(){return{isDialogShow:!1,fieldValue:this.inputValue,fieldValueText:null,countSelectValue:0}},computed:{fieldLabel:function(){if(!this.isHideLabel)return this.inputProperties.label}},mounted:function(){this.isDialogShow=this.isShow,console.log(document.activeElement.closest(".item").querySelector(".list-dialog__action").firstChild),document.activeElement.closest(".item").querySelector(".list-dialog__action").firstChild.focus(),console.log(document.activeElement)},methods:{eventOpenDialog:function(){var e=this;this.isDialogShow=!1,setTimeout((function(){return e.isDialogShow=!0}),100)},eventCloseDialog:function(){this.isDialogShow=!1},eventAcceptList:function(e){console.log(e),this.isDialogShow=!1,this.fieldValueText=this.buildingStringDisplay(e),this.$emit("input-value",this.buildingStringEmit(e))},eventClearValue:function(){this.fieldValue=null,this.fieldValueText=null,this.countSelectValue=0,this.emitInputValue(),this.emitClearValue()},emitInputValue:function(){this.$emit("input-value",this.fieldValue)},emitClearValue:function(){this.$emit("clear-value")},buildingStringDisplay:function(e){if(e.length){var t="";if("field"==this.inputProperties.type){var i=this.$store.getters["DataTable/GET_RELATED_MODEL_VIEW"](this.inputProperties["related_model_name"]);if("{id}"!=i){var n=i.match(/[{\w}]/gi).join(",").replace(/,/g,"").slice(1,-1).split("}{");return e.forEach((function(e){var l="";l=i,n.forEach((function(t){l=l.replace("{".concat(t,"}"),e[t])})),t+="".concat(l,"; ")})),t}}else if("choice"==this.inputProperties.type)return e.forEach((function(e){t+="".concat(e["display_name"],"; ")})),t}},buildingStringEmit:function(e){if(this.countSelectValue=e.length,e.length){var t="";return"field"==this.inputProperties.type?e.forEach((function(e){t+="".concat(e.id,", ")})):"choice"==this.inputProperties.type&&e.forEach((function(e){t+="".concat(e.value,", ")})),console.log(t),t.slice(0,-2)}}}},A=q,H=(i("a9ff"),i("8654")),M=Object(m["a"])(A,n,l,!1,null,"6be03680",null);t["default"]=M.exports;F()(M,{VTextField:H["a"]})}}]);
//# sourceMappingURL=chunk-a983c57c.2cd6e346.js.map